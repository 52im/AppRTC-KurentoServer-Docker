version: "2"
services:
  stun-server:
    container_name: mileworks-stun
    build: ./stun
    expose:
      - "1111"

  turn-server:
    container_name: mileworks-turn
    image: steppechange/docker-coturn
    volumes: 
      - ./coturn/turnserver.conf:/opt/coturn/etc/turnserver.conf
    expose:
      - "3478"

  kurento-media-server:
    container_name: kms
    image: kurento/kurento-media-server
    volumes: 
      - ./kurento/WebRtcEndpoint.conf.ini:/etc/kurento/modules/kurento/WebRtcEndpoint.conf.ini
    expose:
      - "8888"

  unidata-tomcat:
    image: unidata/tomcat-docker
    container_name: mileworks-signal-server
    volumes:
      - ./tomcat/keystore.jks:/usr/local/tomcat/conf/keystore.jks
      - ./tomcat/server.xml:/usr/local/tomcat/conf/server.xml
    expose:
      - "8443"
